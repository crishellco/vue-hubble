"use strict";const e="vue-hubble",t=e=>"// "+e,r=e=>{const t=((e,t,r)=>{const n=r=>String.prototype.split.call(t,r).filter(Boolean).reduce((e,t)=>null!=e?e[t]:e,e),l=n(/[,[\]]+?/)||n(/[,[\].]+?/);return void 0===l||l===e?r:l})(e.$options,["hubble"],{});return"string"==typeof t?t:t.namespace},n=(e,t)=>{if(!t)return"";const n=[t];let l=e.$hubble.enableDeepNamespacing,o=r(e);if(l){let t=e;do{const e=r(t);e&&n.push(e),t=t.$parent}while(t)}else n.push(o);return(e.$hubble.prefix?e.$hubble.prefix+"--":"")+n.filter(e=>!!e).reverse().join("--")},l=e=>""+e,o=(e,t)=>{switch(t){case"class":return"[vue-hubble]."+e;case"id":return"[vue-hubble]#"+e;case"attr":default:return`[vue-hubble][${e}]`}},u=(e,{arg:r,value:u,oldValue:i},{context:b})=>{if(!b.$hubble.environment.includes(process.env.NODE_ENV))return;r=r||b.$hubble.defaultSelectorType;const d=e.parentElement,m=n(b,u),p=n(b,i),h=o(m,r),v=o(p,r);b.$hubble.enableComments&&d&&(({newQuerySelector:e,oldQuerySelector:r,element:n,value:o,parent:u})=>{const c=t(e),s=l(e),i=u.childNodes;if(a({nodes:i,element:n,parent:u,oldQuerySelector:r}),o&&o.length){const e=document.createComment(c),t=document.createComment(s);u.insertBefore(t,n),u.insertBefore(e,n.nextSibling)}})({newQuerySelector:h,oldQuerySelector:v,element:e,value:u,parent:d}),s({element:e,oldSelector:p,newSelector:m,newQuerySelector:h}),c({arg:r,element:e,oldSelector:p,newSelector:m,newQuerySelector:h})},c=({arg:e,element:t,oldSelector:r,newSelector:n,newQuerySelector:l})=>{switch(e){case"class":r&&t.classList.remove(r),n&&(t.classList.add(n),t.dataset.vueHubbleSelector=l);break;case"id":t.id=n;break;case"attr":r&&t.removeAttribute(r),n&&t.setAttributeNode(t.ownerDocument.createAttribute(n));break;default:console.warn(e+" is not a valid selector type, using attr instead"),r&&t.removeAttribute(r),n&&t.setAttributeNode(t.ownerDocument.createAttribute(n))}},s=({element:t,oldSelector:r,newSelector:n,newQuerySelector:l})=>{r&&t.removeAttribute(e),t.setAttributeNode(t.ownerDocument.createAttribute(e)),t.dataset.vueHubbleSelector=n?l:""},a=({nodes:e,element:r,parent:n,oldQuerySelector:o})=>{const u=t(o),c=l(o);for(let t=0;t<e.length;t++){const l=e[t+1],o=e[t-1];e[t]===r&&l&&8===l.nodeType&&l.textContent===u&&n.removeChild(l),e[t]===r&&o&&8===o.nodeType&&o.textContent===c&&n.removeChild(o)}};var i={bind:u,inserted:u,update:u};const b={all:()=>[...document.querySelectorAll("[vue-hubble]")],allMapped(){return d(this.all())},find:e=>[...document.querySelectorAll(`[vue-hubble][${e}]`),...document.querySelectorAll(`[vue-hubble][class*="${e}"]`),...document.querySelectorAll(`[vue-hubble][id*="${e}"]`)],findMapped(e){return d(this.find(e))}};function d(e){return[...e].reduce((e,t)=>({...e,[t.dataset.vueHubbleSelector]:t}),{})}let m=!1;const p={defaultSelectorType:"attr",enableComments:!1,enableDeepNamespacing:!0,environment:"test",prefix:""};function h(e,t={}){e.prototype.$hubble=Object.assign(p,t),e.prototype.$hubble.environment=[].concat(e.prototype.$hubble.environment),m||(window.$hubble=b,e.directive("hubble",i),m=!0)}"undefined"!=typeof window&&window.Vue&&window.Vue.use(h),module.exports=h;
