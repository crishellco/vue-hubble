"use strict";const e="vue-hubble",t=e=>"// "+e,n=e=>{const t=((e,t,n)=>{const r=n=>String.prototype.split.call(t,n).filter(Boolean).reduce((e,t)=>null!=e?e[t]:e,e),l=r(/[,[\]]+?/)||r(/[,[\].]+?/);return void 0===l||l===e?n:l})(e.$options,["hubble"],{});return"string"==typeof t?t:t.namespace},r=(e,t)=>{if(!t)return"";const r=[t];let l=e.$hubble.enableDeepNamespacing,o=n(e);if(l){let t=e;do{const e=n(t);e&&r.push(e),t=t.$parent}while(t)}else r.push(o);return(e.$hubble.prefix?e.$hubble.prefix+"--":"")+r.filter(e=>!!e).reverse().join("--")},l=e=>""+e,o=(e,t)=>{switch(t){case"class":return"[vue-hubble]."+e;case"id":return"[vue-hubble]#"+e;case"attr":default:return`[vue-hubble][${e}]`}},u=(n,{arg:u,value:s,oldValue:a},{context:i})=>{if(!i.$hubble.environment.includes(process.env.NODE_ENV))return;u=u||i.$hubble.defaultSelectorType;const b=n.parentElement,d=r(i,s),p=r(i,a),m=o(d,u),h=o(p,u);switch(i.$hubble.enableComments&&b&&(({newQuerySelector:e,oldQuerySelector:n,element:r,value:o,parent:u})=>{const s=t(e),a=l(e),i=u.childNodes;if(c({nodes:i,element:r,parent:u,oldQuerySelector:n}),o&&o.length){const e=document.createComment(s),t=document.createComment(a);u.insertBefore(t,r),u.insertBefore(e,r.nextSibling)}})({newQuerySelector:m,oldQuerySelector:h,element:n,value:s,parent:b}),p&&n.removeAttribute(e),n.setAttributeNode(n.ownerDocument.createAttribute(e)),n.dataset.vueHubbleSelector=d?m:"",u){case"class":p&&n.classList.remove(p),d&&(n.classList.add(d),n.dataset.vueHubbleSelector=m);break;case"id":n.id=d;break;case"attr":p&&n.removeAttribute(p),d&&n.setAttributeNode(n.ownerDocument.createAttribute(d));break;default:console.warn(u+" is not a valid selector type, using attr instead"),p&&n.removeAttribute(p),d&&n.setAttributeNode(n.ownerDocument.createAttribute(d))}},c=({nodes:e,element:n,parent:r,oldQuerySelector:o})=>{const u=t(o),c=l(o);for(let t=0;t<e.length;t++){const l=e[t+1],o=e[t-1];e[t]===n&&l&&8===l.nodeType&&l.textContent===u&&r.removeChild(l),e[t]===n&&o&&8===o.nodeType&&o.textContent===c&&r.removeChild(o)}};var s={bind:u,inserted:u,update:u};const a={all:()=>[...document.querySelectorAll("[vue-hubble]")],allMapped(){return i(this.all())},find:e=>[...document.querySelectorAll(`[vue-hubble][${e}]`),...document.querySelectorAll(`[vue-hubble][class*="${e}"]`),...document.querySelectorAll(`[vue-hubble][id*="${e}"]`)],findMapped(e){return i(this.find(e))}};function i(e){return[...e].reduce((e,t)=>({...e,[t.dataset.vueHubbleSelector]:t}),{})}let b=!1;const d={defaultSelectorType:"attr",enableComments:!1,enableDeepNamespacing:!0,environment:"test",prefix:""};function p(e,t={}){e.prototype.$hubble=Object.assign(d,t),e.prototype.$hubble.environment=[].concat(e.prototype.$hubble.environment),b||(window.$hubble=a,e.directive("hubble",s),b=!0)}"undefined"!=typeof window&&window.Vue&&window.Vue.use(p),module.exports=p;
